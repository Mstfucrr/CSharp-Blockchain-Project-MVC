@using RecycleCoin.Entities.Concrete
@using RecycleCoinMvc.Models

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var categories = ViewBag.categories as List<Category>;
    var products = Session["products"] as List<Product>;
    var categoryId = Convert.ToInt32(Session["categoryId"]);
    Session.Remove("products");
    Session.Remove("categoryId");
    var cartItems = Session["cartItems"] as List<CartItem>;
}

<style>
    .category-image {
        width: 7rem;
        height: auto;
    }

    .image-row {
        height: 90%;
    }

        .image-row .col-12 {
            height: 130px;
        }
</style>

<section style="width: 100%; margin-top: -18px; padding-top: 180px; padding-bottom: 70px; background: linear-gradient(230deg, red, #ff00cb); min-height: 100vh; display: flex; justify-content: center; align-items: center;">
	<div class="d-flex flex-column"
	     style="background-color: #fff;width: 56rem;height: 40rem;box-shadow: 0px 0px 20px 1px;border-radius: 25px;">
		<div class="container h-100">
			<div style="text-align: center;margin-top: 23px;">
				<h2>Geri Dönüşüm Merkezi</h2>
			</div>
			<div class="h-75">
				<form class = "form-row h-100">
					<div class="col-7 h-100">
						<div class="form-group">
							<label for="toAddress">Alıcı Adres</label>
							<input class="form-control" type="text" required id="toAddress">
						</div>
						<div class="form-row h-75" style="margin-top: 47px;">
							<div class="col-4 h-100">
								<div class="image-row form-row justify-content-center" style="overflow-y: auto;">
									<h4>Kategoriler</h4>
									@foreach (var category in categories)
									{
										<div class="col-12 d-flex justify-content-center align-items-center">
											<a href="/Admin/RecycleCenter/GetProductsByCategory?categoryId=@category.Id">
												<img data-bss-hover-animate="rubberBand" id="papers" class="category-image"
												     src="~/image/@category.Image">
											</a>
										</div>
									}
								</div>
							</div>
							<div class="col-8 h-75" style="overflow-y: auto;margin-top: 27px;">
								<div class="form-row h-100"
								     style="overflow-y: auto; width: 100%; padding-left: 16px;">
									@if (products != null)
									{

										foreach (var product in products)
										{
											<div class="col-6 d-flex flex-column" style="height: 77px; border-style: groove;"
											     data-productId="@product.Id" data-carbon="@product.Carbon">
												<p class="text-center" style="margin-bottom: 0px;">@product.Name</p>
												<div class="d-flex justify-content-between position-relative" style="bottom: -7px; background: var(--white); height: 25px; width: 100%;">
													<input class="form-control" name="amount" type="number" min="1" style="font-size: 11px;width: 43%" value="1">
													<p style="font-size: 17px;">(@product.Carbon c)</p>
													<a @*href="/Admin/RecycleCenter/AddToCart?productId=@product.Id"*@ class="btn btn-outline-success product" type="button" style="padding-top: 0px; padding-right: 3px; padding-left: 3px;">
														<i class="typcn typcn-tick position-relative" style="color: var(--teal); font-size: 22px; bottom: 6px;"></i>
													</a>
												</div>
											</div>
										}
									}

									@*<div class="col-6 d-flex flex-column" style="height: 77px; border-style: groove;"
                                             data-name="Jelatin" data-carbon="18">
                                            <p class="text-center" style="margin-bottom: 0px;">Jelatin</p>
                                            <div class="d-flex justify-content-between position-relative"
                                                 style="bottom: -7px; background: var(--white); height: 25px; width: 100%;">
                                                <input class="form-control w-50" type="number" min="1"
                                                       style="font-size: 10px;" value="1">
                                                <p style="font-size: 17px;">(c)</p>
                                                <button class="btn btn-outline-success product" type="button"
                                                        style="padding-top: 0px; padding-right: 3px; padding-left: 3px;">
                                                    <i class="typcn typcn-tick position-relative"
                                                       style="color: var(--teal); font-size: 22px; bottom: 6px;"></i>
                                                </button>
                                            </div>
                                        </div>*@
								</div>
							</div>
						</div>
					</div>
					<div class="col-5 d-flex flex-row justify-content-end align-items-start mx-auto"
					     style="margin-top: 17px;">
						<div class="d-flex flex-column flex-grow-0 w-75" id="card"
						     style="height: 258px;/*border: 2px solid blue;*/transition: 1s;scale: 0;overflow: auto;opacity: 0;transform-origin: 120% 0%;">
							<div class="table-responsive" data-aos="zoom-in" data-aos-delay="350"
							     style="border-top-left-radius: 25px;overflow-x: hidden;">
								<table class="table table-striped table-dark" id="TransactionTable">
									<thead class="bg-dark" style="position: sticky;top: 0;">
									<tr style="font-size: 12px;">
										<th>Ad</th>
										<th>Miktar</th>
										<th>Toplam Carbon Tutarı</th>
										<th>İptal et</th>
									</tr>
									</thead>
									<tbody id="cartData">
									@if (cartItems != null)
									{
										foreach (var cartItem in cartItems)
										{

											var total = cartItem.amount * cartItem.product.Carbon;
											<tr style="background-color: #F42951; font-size: 15px;">
												<td>@cartItem.product.Name</td>
												<td>@cartItem.amount</td>

												<td>@total</td>
												<td>
													<a href="/Admin/RecycleCenter/RemoveFromCart?productId=@cartItem.product.Id&amount=@cartItem.amount" class="btn btn-primary deleteRow" type="button">
														<svg xmlns="http://www.w3.org/2000/svg" viewBox="-32 0 512 512"
														     width="1em" height="1em" fill="currentColor">
															<path d="M160 400C160 408.8 152.8 416 144 416C135.2 416 128 408.8 128 400V192C128 183.2 135.2 176 144 176C152.8 176 160 183.2 160 192V400zM240 400C240 408.8 232.8 416 224 416C215.2 416 208 408.8 208 400V192C208 183.2 215.2 176 224 176C232.8 176 240 183.2 240 192V400zM320 400C320 408.8 312.8 416 304 416C295.2 416 288 408.8 288 400V192C288 183.2 295.2 176 304 176C312.8 176 320 183.2 320 192V400zM317.5 24.94L354.2 80H424C437.3 80 448 90.75 448 104C448 117.3 437.3 128 424 128H416V432C416 476.2 380.2 512 336 512H112C67.82 512 32 476.2 32 432V128H24C10.75 128 0 117.3 0 104C0 90.75 10.75 80 24 80H93.82L130.5 24.94C140.9 9.357 158.4 0 177.1 0H270.9C289.6 0 307.1 9.358 317.5 24.94H317.5zM151.5 80H296.5L277.5 51.56C276 49.34 273.5 48 270.9 48H177.1C174.5 48 171.1 49.34 170.5 51.56L151.5 80zM80 432C80 449.7 94.33 464 112 464H336C353.7 464 368 449.7 368 432V128H80V432z">
															</path>
														</svg>
													</a>
												</td>


											</tr>
										}
									}
									</tbody>
								</table>
							</div>
						</div><button class="btn btn-outline-success btn-lg text-dark" id="cardViewer"
						              type="button">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -32 576 576"
							     width="1em" height="1em" fill="currentColor">
								<path d="M96 0C107.5 0 117.4 8.19 119.6 19.51L121.1 32H541.8C562.1 32 578.3 52.25 572.6 72.66L518.6 264.7C514.7 278.5 502.1 288 487.8 288H170.7L179.9 336H488C501.3 336 512 346.7 512 360C512 373.3 501.3 384 488 384H159.1C148.5 384 138.6 375.8 136.4 364.5L76.14 48H24C10.75 48 0 37.25 0 24C0 10.75 10.75 0 24 0H96zM128 464C128 437.5 149.5 416 176 416C202.5 416 224 437.5 224 464C224 490.5 202.5 512 176 512C149.5 512 128 490.5 128 464zM512 464C512 490.5 490.5 512 464 512C437.5 512 416 490.5 416 464C416 437.5 437.5 416 464 416C490.5 416 512 437.5 512 464z">
								</path>
							</svg>
						</button>
					</div>
					<div class="w-100 text-center">

						<button class="btn btn-outline-success btn-lg text-dark float-right" id="recycleSubmit"
						        type="submit">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em" height="1em"
							     fill="currentColor">
								<path d="M180.2 243.1C185 263.9 162.2 280.2 144.1 268.8L119.8 253.6l-50.9 81.43c-13.33 21.32 2.004 48.98 27.15 48.98h32.02c17.64 0 31.98 14.32 31.98 31.96c0 17.64-14.34 32.05-31.98 32.05H96.15c-75.36 0-121.3-82.84-81.47-146.8L65.51 219.8L41.15 204.5C23.04 193.1 27.66 165.5 48.48 160.7l91.43-21.15C148.5 137.7 157.2 142.9 159.2 151.6L180.2 243.1zM283.1 78.96l41.25 66.14l-24.25 15.08c-18.16 11.31-13.57 38.94 7.278 43.77l91.4 21.15c8.622 1.995 17.23-3.387 19.21-12.01l21.04-91.43c4.789-20.81-17.95-37.05-36.07-25.76l-24.36 15.2L337.4 45.14c-37.58-60.14-125.2-60.18-162.8-.0617L167.2 56.9C157.9 71.75 162.5 91.58 177.3 100.9c14.92 9.359 34.77 4.886 44.11-10.04l7.442-11.89C241.6 58.58 270.9 59.33 283.1 78.96zM497.3 301.3l-16.99-27.26c-9.336-14.98-29.06-19.56-44.04-10.21c-14.94 9.318-19.52 29.15-10.18 44.08l16.99 27.15c13.35 21.32-1.984 49-27.14 49h-95.99l.0234-28.74c0-21.38-25.85-32.09-40.97-16.97l-66.41 66.43c-6.222 6.223-6.222 16.41 .0044 22.63l66.42 66.34c15.12 15.1 40.95 4.386 40.95-16.98l-.0234-28.68h95.86C491.2 448.1 537.2 365.2 497.3 301.3z">
								</path>
							</svg>&nbsp;Geri Dönüştür
						</button>
					</div>
				</form> 
			</div>

		</div>
	</div>
</section>


